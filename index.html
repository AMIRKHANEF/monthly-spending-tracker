<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مدیریت هزینه‌های ماهانه</title>
    <link rel="stylesheet" href="styles.css">

    <!-- Load Jalali first -->
    <script src="https://unpkg.com/jalaali-js/dist/jalaali.min.js"></script>

    <!-- Then load your modified script -->
    <script src="script.farsi.jalali.js"></script>
</head>

<body>
    <div class="container">
        <header class="header">
            <h1 class="title">هزینه‌های ماهانه</h1>
            <div class="month-selector">
                <button id="nextMonth" class="nav-btn">‹</button>
                <span id="currentMonth" class="current-month"></span>
                <button id="prevMonth" class="nav-btn">›</button>
                <button id="viewMonthExpenses" class="theme-btn" title="مشاهده هزینه‌های ماه">📊</button>
                <button id="themeToggle" class="theme-btn" title="تنظیمات تم">🎨</button>
            </div>
        </header>

        <div class="summary-card">
            <div class="summary-item">
                <span class="summary-label">کل هزینه‌ها</span>
                <span id="totalSpent" class="summary-value">۰ تومان</span>
            </div>
            <div class="summary-item">
                <span class="summary-label">میانگین روزانه</span>
                <span id="dailyAverage" class="summary-value">۰ تومان</span>
            </div>
        </div>

        <div class="add-expense-card">
            <h3>افزودن هزینه امروز</h3>
            <div class="input-group">
                <input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" type="text"
                    id="expenseAmount" placeholder="۰" step="1" min="0">
                <input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" type="text"
                    id="expenseDescription" placeholder="برای چه چیزی هزینه کردید؟">
                <button id="addExpense" class="add-btn">افزودن هزینه</button>
            </div>
        </div>

        <div class="calendar-container">
            <div id="calendar" class="calendar"></div>
        </div>

        <div class="expenses-list">
            <h3>هزینه‌های اخیر</h3>
            <div id="expensesList" class="expenses-container"></div>
        </div>
    </div>

    <div id="dayModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalDate"></h3>
                <button id="closeModal" class="close-btn">×</button>
            </div>
            <div class="modal-body">
                <div id="dayExpenses" class="day-expenses"></div>
                <div class="modal-total">
                    جمع کل: <span id="dayTotal">۰ تومان</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Monthly Expenses Modal -->
    <div id="monthExpensesModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="monthModalTitle"></h3>
                <button id="closeMonthExpensesModal" class="close-btn">×</button>
            </div>
            <div class="modal-body">
                <div id="monthExpensesList" class="month-expenses-list"></div>
                <div class="modal-total">
                    جمع کل ماه: <span id="monthTotal">۰ تومان</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirmation modal for expense removal -->
    <div id="confirmModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>تأیید حذف</h3>
                <div class="confirmation-icon">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#e53e3e" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="15" y1="9" x2="9" y2="15"></line>
                        <line x1="9" y1="9" x2="15" y2="15"></line>
                    </svg>
                </div>
                <button id="closeConfirmModal" class="close-btn">×</button>
            </div>
            <div class="modal-body">
                <div class="confirmation-content">
                    <p class="confirmation-message">آیا از حذف این هزینه اطمینان دارید؟</p>
                    <div id="expenseToDelete" class="expense-preview"></div>
                </div>
                <div style="display: flex; gap: 10px; justify-content: center;">
                    <button id="confirmDelete" class="add-btn" style="background: #e53e3e; flex: 1;">حذف</button>
                    <button id="cancelDelete" class="add-btn" style="background: #718096; flex: 1;">لغو</button>
                </div>
            </div>
        </div>
    </div>
</body>

</html>