<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø¯ÛŒØ±ÛŒØª Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø§Ù‡Ø§Ù†Ù‡</title>
    <link rel="stylesheet" href="styles.css">

    <!-- Load Jalali first -->
    <script src="https://unpkg.com/jalaali-js/dist/jalaali.min.js"></script>

    <!-- Load manifest -->
    <link rel="manifest" href="./manifest.json" />

    <!-- Then load your modified script -->
    <script src="script.farsi.jalali.js"></script>
</head>

<body>
    <div class="container">
        <header class="header">
            <h1 class="title">Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø§Ù‡Ø§Ù†Ù‡</h1>
            <div class="month-selector">
                <button id="nextMonth" class="nav-btn">â€¹</button>
                <span id="currentMonth" class="current-month"></span>
                <button id="prevMonth" class="nav-btn">â€º</button>
                <button id="viewMonthExpenses" class="theme-btn" title="Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø§Ù‡">ğŸ“Š</button>
                <button id="themeToggle" class="theme-btn" title="ØªÙ†Ø¸ÛŒÙ…Ø§Øª ØªÙ…">ğŸ¨</button>
            </div>
        </header>

        <div class="summary-card">
            <div class="summary-item">
                <span class="summary-label">Ú©Ù„ Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§</span>
                <span id="totalSpent" class="summary-value">Û° ØªÙˆÙ…Ø§Ù†</span>
            </div>
            <div class="summary-item">
                <span class="summary-label">Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø±ÙˆØ²Ø§Ù†Ù‡</span>
                <span id="dailyAverage" class="summary-value">Û° ØªÙˆÙ…Ø§Ù†</span>
            </div>
        </div>

        <div class="add-expense-card">
            <h3>Ø§ÙØ²ÙˆØ¯Ù† Ù‡Ø²ÛŒÙ†Ù‡ Ø§Ù…Ø±ÙˆØ²</h3>
            <div class="input-group">
                <input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" type="text"
                    id="expenseAmount" placeholder="Û°" step="1" min="0">
                <input autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" type="text"
                    id="expenseDescription" placeholder="Ø¨Ø±Ø§ÛŒ Ú†Ù‡ Ú†ÛŒØ²ÛŒ Ù‡Ø²ÛŒÙ†Ù‡ Ú©Ø±Ø¯ÛŒØ¯ØŸ">
                <button id="addExpense" class="add-btn">Ø§ÙØ²ÙˆØ¯Ù† Ù‡Ø²ÛŒÙ†Ù‡</button>
            </div>
        </div>

        <div class="calendar-container">
            <div id="calendar" class="calendar"></div>
        </div>

        <div class="expenses-list">
            <h3>Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø®ÛŒØ±</h3>
            <div id="expensesList" class="expenses-container"></div>
        </div>
    </div>

    <div id="dayModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalDate"></h3>
                <button id="closeModal" class="close-btn">Ã—</button>
            </div>
            <div class="modal-body">
                <div id="dayExpenses" class="day-expenses"></div>
                <div class="modal-total">
                    Ø¬Ù…Ø¹ Ú©Ù„: <span id="dayTotal">Û° ØªÙˆÙ…Ø§Ù†</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Monthly Expenses Modal -->
    <div id="monthExpensesModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="monthModalTitle"></h3>
                <button id="closeMonthExpensesModal" class="close-btn">Ã—</button>
            </div>
            <div class="modal-body totals">
                <div class="modal-total selected-total-display">
                    Ø¬Ù…Ø¹ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡: <span id="selectedExpensesTotal">Û° ØªÙˆÙ…Ø§Ù†</span>
                </div>
                <div class="modal-total">
                    Ø¬Ù…Ø¹ Ú©Ù„ Ù…Ø§Ù‡: <span id="monthTotal">Û° ØªÙˆÙ…Ø§Ù†</span>
                </div>
            </div>
            <div class="modal-body monthExpensesModal">
                <div id="monthExpensesList" class="month-expenses-list"></div>
            </div>
        </div>
    </div>

    <!-- Confirmation modal for expense removal -->
    <div id="confirmModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ØªØ£ÛŒÛŒØ¯ Ø­Ø°Ù</h3>
                <div class="confirmation-icon">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#e53e3e" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="15" y1="9" x2="9" y2="15"></line>
                        <line x1="9" y1="9" x2="15" y2="15"></line>
                    </svg>
                </div>
                <button id="closeConfirmModal" class="close-btn">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="confirmation-content">
                    <p class="confirmation-message">Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ù‡Ø²ÛŒÙ†Ù‡ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ</p>
                    <div id="expenseToDelete" class="expense-preview"></div>
                </div>
                <div style="display: flex; gap: 10px; justify-content: center;">
                    <button id="confirmDelete" class="add-btn" style="background: #e53e3e; flex: 1;">Ø­Ø°Ù</button>
                    <button id="cancelDelete" class="add-btn" style="background: #718096; flex: 1;">Ù„ØºÙˆ</button>
                </div>
            </div>
        </div>
    </div>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function () {
                navigator.serviceWorker.register('service-worker.js').then(function (registration) {
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                }, function (err) {
                    console.log('ServiceWorker registration failed: ', err);
                });
            });
        }
    </script>
</body>

</html>